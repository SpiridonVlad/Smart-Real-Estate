<div class="profile-container" *ngIf="userDetails; else loading">
  <div class="profile-header">
    <div class="profile-left">
      <h1>{{ userDetails?.username }}</h1>
      <img src="https://compote.slate.com/images/b4acd613-b4b0-42bd-bdfe-89fc55985608.jpeg?crop=4778%2C3185%2Cx258%2Cy703&width=1280" alt="Profile Image" class="profile-image" />
    </div>
    <div class="profile-right">
      <div class="profile-details">
        <p><strong>ID:</strong> {{ userDetails?.id }}</p>
        <p><strong>Email:</strong> {{ userDetails?.email }}</p>
        <p><strong>Verified:</strong> {{ userDetails?.verified ? 'Yes' : 'No' }}</p>
        <p><strong>Rating:</strong> {{ userDetails?.rating }}</p>
        <p><strong>Type:</strong> {{ getUserType(userDetails?.type ?? -1) }}</p>
      </div>
    </div>
  </div>

  <div class="profile-actions">
    <button class="update-button" (click)="navigateTo('/users/update', userDetails?.id)">Update Profile</button>
  </div>
</div>

<!-- Action Buttons -->
<div class="action-buttons">
  <button class="action-button" (click)="changeSection('messages')">Messages</button>
  <button class="action-button" (click)="changeSection('properties')">Properties</button>
  <button class="action-button" (click)="changeSection('listings')">Listings</button>
</div>

<!-- Dynamic Content Section -->
<div class="dynamic-content">
  <div *ngIf="currentSection === 'messages'">
    <h2>Messages</h2>
    <p>Here are your messages...</p>
    <!-- Add additional content or components for Messages -->
  </div>
  <div *ngIf="currentSection === 'properties'">
    <h2>Properties</h2>
    <div *ngIf="properties.length > 0; else noProperties">
      <div *ngFor="let property of properties" class="property-card">
        <h3>{{ getPropertyType(+property.type) }}</h3>
        <p><strong>Property ID:</strong> {{ property.id }}</p>
        <div class="address">
          <h4>Address:</h4>
          <p>{{ property.address.street }}, {{ property.address.city }}, {{ property.address.state }}</p>
          <p>{{ property.address.postalCode ? property.address.postalCode + ', ' : '' }}{{ property.address.country }}</p>
          <p *ngIf="property.address.additionalInfo">{{ property.address.additionalInfo }}</p>
        </div>
        <div class="features">
          <h4>Features:</h4>
          <ul>
            <li *ngFor="let feature of getFeatureList(property.features)">
              <ng-container *ngIf="isNumericFeature(feature.key); else booleanFeature">
                {{ feature.key }}: {{ feature.value }}
              </ng-container>
              <ng-template #booleanFeature>
                {{ feature.key }}:
                <span [class.green-check]="feature.value === 1" [class.red-x]="feature.value === 0">
                  {{ feature.value === 1 ? '✔️' : '❌' }}
                </span>
              </ng-template>
            </li>
          </ul>
        </div>
        <hr class="property-divider" />        
      </div>
    </div>
    <ng-template #noProperties>
      <p>No properties found.</p>
    </ng-template>
  </div>
  <div *ngIf="currentSection === 'listings'">
    <h2>Listings</h2>
    <p>Here are your listings...</p>
    <!-- Add additional content or components for Listings -->
  </div>
</div>

<ng-template #loading>
  <p>Loading user details...</p>
</ng-template>
